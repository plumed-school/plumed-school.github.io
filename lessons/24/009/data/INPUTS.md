# Input Files

## ASE Input File

This tutorial uses ASE as the MD engine. Before you install ASE, you will need to ensure that your PLUMED is installed with Python wrappers (https://www.plumed.org/doc-v2.9/user-doc/html/_installation.html#installingpython).

To install the development version of ASE, which includes all the latest features, you can run the following commands:
```
git clone https://gitlab.com/ase/ase.git
cd ase
pip install -e .
```

Once ASE is installed, you can run MD simulations with PLUMED with the following example Python script:
```python
from ase import Atoms, units
from ase.md.velocitydistribution import MaxwellBoltzmannDistribution
from ase.md.bussi import Bussi
from ase.md import MDLogger
from ase.io import read, write
from ase.io.trajectory import Trajectory
import torch
from mace.calculators import MACECalculator
from ase.calculators.plumed import Plumed

# Load the trained MACE model
model_path = "./path/to/your/trained/MACE/model.model"
model = MACECalculator(model_path, device='cuda')

# Read the initial atomic configuration from an XYZ file
xyz_file_path = './path/to/your/initial/configuration.xyz'
atoms = read(xyz_file_path)

# Set the cell (volume) and periodic boundary conditions (PBC)
cell = [[12.98, 0.0, 0.0],  # x-axis vector
        [0.0, 12.98, 0.0],  # y-axis vector
        [0.0, 0.0, 12.98]]  # z-axis vector
atoms.set_cell(cell)
atoms.set_pbc([True, True, True])  # Set PBC along x, y, z

# Set up the PLUMED actions
# The PLUMED actions in a plumed.dat file can be inputted explicitly into this Python script. More details are described below.
setup = [f"# Default units in PLUMED",
          "UNITS LENGTH=nm TIME=ps ENERGY=kj/mol",
          "..."]

# Set up the CSVR thermostat for the NVT ensemble
temperature_K = 300
timestep = 0.5  # fs
taut = 1000 # fs
atoms.calc = Plumed(calc=model, input=setup, timestep=timestep * units.fs, atoms=atoms, kT=temperature_K * units.kB, log='PLUMED.OUT')
MaxwellBoltzmannDistribution(atoms, temperature_K=300)
dyn = Bussi(atoms, timestep * units.fs, temperature_K, taut * units.fs)

# Save the trajectory
traj = Trajectory('mace_metad.traj', 'w', atoms)
dyn.attach(traj.write, interval=10)

# Set up a logger to monitor the simulation
dyn.attach(MDLogger(dyn, atoms, 'md_mace_metad.log', header=True, stress=False), interval=10)

# Run the MD simulation
nsteps = 500000  # Number of MD steps
dyn.run(nsteps)

# Export the last frame in extxyz format for restarting the simulation
write("mace_metad_restart.xyz", atoms, format='extxyz')
```

## PLUMED Input Section

As shown above, the PLUMED actions can be inputted explicitly in the Python script for the ASE input:
{% raw %}
<div style="width: 100%; float:left">
<div style="width: 90%; float:left" id="value_details_./solutions/walker-0/plumed.dat"> Click on the labels of the actions for more information on what each action computes </div>
<div style="width: 10%; float:left"><table><tr><td style="padding:1px"><a href="./solutions/walker-0/plumed.dat.plumed.stderr"><img src="https://img.shields.io/badge/v2.9-passing-green.svg" alt="tested onv2.9" /></a></td></tr><tr><td style="padding:1px"><a href="./solutions/walker-0/plumed.dat.plumed_master.stderr"><img src="https://img.shields.io/badge/master-failed-red.svg" alt="tested onmaster" /></a></td></tr><tr><td style="padding:0px"><img class="toggler" src="https://img.shields.io/badge/master-incomplete-yellow.svg" alt="tested on master" onmouseup='toggleDisplay("./solutions/walker-0/plumed.dat")' onmousedown='toggleDisplay("./solutions/walker-0/plumed.dat")'/></td></tr>
</table></div></div>
<div id="./solutions/walker-0/plumed.dat_short">
<pre style="width=97%;">
<span style="color:blue" class="comment"># Default units in PLUMED</span>
<div class="tooltip" style="color:green">UNITS<div class="right">This command sets the internal units for the code. <a href="https://www.plumed.org/doc-master/user-doc/html/_u_n_i_t_s.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">LENGTH<div class="right">the units of lengths<i></i></div></div>=<span style="background-color:yellow">__FILL__</span> <div class="tooltip">TIME<div class="right">the units of time<i></i></div></div>=<span style="background-color:yellow">__FILL__</span> <div class="tooltip">ENERGY<div class="right">the units of energy<i></i></div></div>=<span style="background-color:yellow">__FILL__</span>
<br/><span style="color:blue" class="comment"># Define the CVs and PLUMED actions</span>
<span style="color:blue" class="comment"># Define the group of hydrogen atoms of water</span>
<span style="display:none;" id="./solutions/walker-0/plumed.dat">The UNITS action with label <b></b> calculates something</span><b name="./solutions/walker-0/plumed.dathw" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.dathw","./solutions/walker-0/plumed.dathw","brown")'>hw</b>: <div class="tooltip" style="color:green">GROUP<div class="right">Define a group of atoms so that a particular list of atoms can be referenced with a single label in definitions of CVs or virtual atoms. <a href="https://www.plumed.org/doc-master/user-doc/html/_g_r_o_u_p.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the numerical indexes for the set of atoms in the group<i></i></div></div>=1,2,5,6,7,9,11,13,15,16,18,19,21,23,25,26,27,29,30,31,33,34,35,36,39,40,43,45,46,47,48,51,52,54,55,57,58,59,61,62,63,65,66,67,68,71,72,73,75,76,78,79,80,81,82,84,85,89,90,91,92,95,96,98,99,100,102,105,106,107,109,110,112,113,115,116,117,119,120,121,122,123,124,126,129,130,132,134,135,136,137,138,140,142,143,144,147,149,151,152,153,155,156,157,158,159,160,161,162,166,167,170,171,173,175,176,177,179,181,182,183,184,186,187,188,189
<br/><span style="color:blue" class="comment"># Define the group of oxygen atoms of water by removing the hydrogen atoms of all water molecules</span>
<span style="display:none;" id="./solutions/walker-0/plumed.dathw">The GROUP action with label <b>hw</b> calculates something</span><b name="./solutions/walker-0/plumed.datow" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.datow","./solutions/walker-0/plumed.datow","brown")'>ow</b>: <div class="tooltip" style="color:green">GROUP<div class="right">Define a group of atoms so that a particular list of atoms can be referenced with a single label in definitions of CVs or virtual atoms. <a href="https://www.plumed.org/doc-master/user-doc/html/_g_r_o_u_p.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the numerical indexes for the set of atoms in the group<i></i></div></div>=1-189 <div class="tooltip">REMOVE<div class="right">remove these atoms from the list<i></i></div></div>=<span style="background-color:yellow">__FILL__</span>
<br/><span style="color:blue" class="comment"># Define the first CV being biased, the N-O bond being dissociated</span>
<span style="display:none;" id="./solutions/walker-0/plumed.datow">The GROUP action with label <b>ow</b> calculates something</span><b name="./solutions/walker-0/plumed.datcv1" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.datcv1","./solutions/walker-0/plumed.datcv1","brown")'>cv1</b>: <div class="tooltip" style="color:green">DISTANCE<div class="right">Calculate the distance between a pair of atoms. <a href="https://www.plumed.org/doc-master/user-doc/html/_d_i_s_t_a_n_c_e.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=192,193
<br/><span style="color:blue" class="comment"># Define the second CV being biased, the number of hydrogen atoms of water surrounding the NO2 fragment of the nitrate anion</span>
<span style="display:none;" id="./solutions/walker-0/plumed.datcv1">The DISTANCE action with label <b>cv1</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">cv1.value</td><td>the DISTANCE between this pair of atoms</td></tr></table></span><b name="./solutions/walker-0/plumed.datcn" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.datcn","./solutions/walker-0/plumed.datcn","brown")'>cn</b>: <div class="tooltip" style="color:green">COORDINATION<div class="right">Calculate coordination numbers. <a href="https://www.plumed.org/doc-master/user-doc/html/_c_o_o_r_d_i_n_a_t_i_o_n.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">GROUPA<div class="right">First list of atoms<i></i></div></div>=190,191 <div class="tooltip">GROUPB<div class="right">Second list of atoms (if empty, N*(N-1)/2 pairs in GROUPA are counted)<i></i></div></div>=<span style="background-color:yellow">__FILL__</span> <div class="tooltip">R_0<div class="right">The r_0 parameter of the switching function<i></i></div></div>=0.255 <div class="tooltip">NN<div class="right"> The n parameter of the switching function <i></i></div></div>=8 <div class="tooltip">MM<div class="right"> The m parameter of the switching function; 0 implies 2*NN<i></i></div></div>=16
<span style="display:none;" id="./solutions/walker-0/plumed.datcn">The COORDINATION action with label <b>cn</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">cn.value</td><td>the value of the coordination</td></tr></table></span><b name="./solutions/walker-0/plumed.datcv2" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.datcv2","./solutions/walker-0/plumed.datcv2","brown")'>cv2</b>: <div class="tooltip" style="color:green">CUSTOM<div class="right">Calculate a combination of variables using a custom expression. <a href="https://www.plumed.org/doc-master/user-doc/html/_c_u_s_t_o_m.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the values input to this function<i></i></div></div>=<b name="./solutions/walker-0/plumed.datcn">cn</b> <div class="tooltip">FUNC<div class="right">the function you wish to evaluate<i></i></div></div>=x*0.5 <div class="tooltip">PERIODIC<div class="right">if the output of your function is periodic then you should specify the periodicity of the function<i></i></div></div>=NO
<br/><span style="color:blue" class="comment"># Define other CVs for monitoring or post-processing</span>
<span style="display:none;" id="./solutions/walker-0/plumed.datcv2">The CUSTOM action with label <b>cv2</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">cv2.value</td><td>an arbitrary function</td></tr></table></span><b name="./solutions/walker-0/plumed.dathbmat1" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.dathbmat1","./solutions/walker-0/plumed.dathbmat1","brown")'>hbmat1</b>: <div class="tooltip" style="color:green">HBOND_MATRIX<div class="right">Adjacency matrix in which two atoms are adjacent if there is a hydrogen bond between them. <a href="https://www.plumed.org/doc-master/user-doc/html/_h_b_o_n_d__m_a_t_r_i_x.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ACCEPTORS<div class="right">The list of atoms which can accept a hydrogen bond<i></i></div></div>=193 <div class="tooltip">HYDROGENS<div class="right">The list of atoms that can form the bridge between the two interesting parts of the structure<i></i></div></div>=<b name="./solutions/walker-0/plumed.dathw">hw</b> <div class="tooltip">DONORS<div class="right">The list of atoms which can donate a hydrogen bond<i></i></div></div>=<b name="./solutions/walker-0/plumed.datow">ow</b> <div class="tooltip">SWITCH<div class="right">The switchingfunction that specifies how close a pair of atoms must be together for there to be a hydrogen bond between them<i></i></div></div>={RATIONAL R_0=0.345 NN=8 MM=16} <div class="tooltip">HSWITCH<div class="right">The switchingfunction that specifies how close the hydrogen must be to the donor atom of the hydrogen bond for it to be considered a hydrogen bond<i></i></div></div>={RATIONAL R_0=0.115 NN=12 MM=24} <div class="tooltip">ASWITCH<div class="right">A switchingfunction that is used to specify what the angle between the vector connecting the donor atom to the acceptor atom and the vector connecting the donor atom to the hydrogen must be in order for it considered to be a hydrogen bond<i></i></div></div>={RATIONAL R_0=0.167pi NN=6 MM=12} SUM
<span style="display:none;" id="./solutions/walker-0/plumed.dathbmat1">The HBOND_MATRIX action with label <b>hbmat1</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">hbmat1.value</td><td>a matrix containing the weights for the bonds between each pair of atoms</td></tr></table></span><b name="./solutions/walker-0/plumed.dathbmat2" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.dathbmat2","./solutions/walker-0/plumed.dathbmat2","brown")'>hbmat2</b>: <div class="tooltip" style="color:green">HBOND_MATRIX<div class="right">Adjacency matrix in which two atoms are adjacent if there is a hydrogen bond between them. <a href="https://www.plumed.org/doc-master/user-doc/html/_h_b_o_n_d__m_a_t_r_i_x.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ACCEPTORS<div class="right">The list of atoms which can accept a hydrogen bond<i></i></div></div>=190,191 <div class="tooltip">HYDROGENS<div class="right">The list of atoms that can form the bridge between the two interesting parts of the structure<i></i></div></div>=<b name="./solutions/walker-0/plumed.dathw">hw</b> <div class="tooltip">DONORS<div class="right">The list of atoms which can donate a hydrogen bond<i></i></div></div>=<b name="./solutions/walker-0/plumed.datow">ow</b> <div class="tooltip">SWITCH<div class="right">The switchingfunction that specifies how close a pair of atoms must be together for there to be a hydrogen bond between them<i></i></div></div>={RATIONAL R_0=0.345 NN=8 MM=16} <div class="tooltip">HSWITCH<div class="right">The switchingfunction that specifies how close the hydrogen must be to the donor atom of the hydrogen bond for it to be considered a hydrogen bond<i></i></div></div>={RATIONAL R_0=0.115 NN=12 MM=24} <div class="tooltip">ASWITCH<div class="right">A switchingfunction that is used to specify what the angle between the vector connecting the donor atom to the acceptor atom and the vector connecting the donor atom to the hydrogen must be in order for it considered to be a hydrogen bond<i></i></div></div>={RATIONAL R_0=0.167pi NN=6 MM=12} SUM
<span style="display:none;" id="./solutions/walker-0/plumed.dathbmat2">The HBOND_MATRIX action with label <b>hbmat2</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">hbmat2.value</td><td>a matrix containing the weights for the bonds between each pair of atoms</td></tr></table></span><b name="./solutions/walker-0/plumed.datno2_ang" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.datno2_ang","./solutions/walker-0/plumed.datno2_ang","brown")'>no2_ang</b>: <div class="tooltip" style="color:green">ANGLE<div class="right">Calculate an angle. <a href="https://www.plumed.org/doc-master/user-doc/html/_a_n_g_l_e.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the list of atoms involved in this collective variable (either 3 or 4 atoms)<i></i></div></div>=190,192,191
<span style="display:none;" id="./solutions/walker-0/plumed.datno2_ang">The ANGLE action with label <b>no2_ang</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">no2_ang.value</td><td>the ANGLE involving these atoms</td></tr></table></span><b name="./solutions/walker-0/plumed.datno2_ang_deg" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.datno2_ang_deg","./solutions/walker-0/plumed.datno2_ang_deg","brown")'>no2_ang_deg</b>: <div class="tooltip" style="color:green">CUSTOM<div class="right">Calculate a combination of variables using a custom expression. <a href="https://www.plumed.org/doc-master/user-doc/html/_c_u_s_t_o_m.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the values input to this function<i></i></div></div>=<b name="./solutions/walker-0/plumed.datno2_ang">no2_ang</b> <div class="tooltip">FUNC<div class="right">the function you wish to evaluate<i></i></div></div>=x/pi*180 <div class="tooltip">PERIODIC<div class="right">if the output of your function is periodic then you should specify the periodicity of the function<i></i></div></div>=NO
<span style="display:none;" id="./solutions/walker-0/plumed.datno2_ang_deg">The CUSTOM action with label <b>no2_ang_deg</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">no2_ang_deg.value</td><td>an arbitrary function</td></tr></table></span><b name="./solutions/walker-0/plumed.datno1" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.datno1","./solutions/walker-0/plumed.datno1","brown")'>no1</b>: <div class="tooltip" style="color:green">DISTANCE<div class="right">Calculate the distance between a pair of atoms. <a href="https://www.plumed.org/doc-master/user-doc/html/_d_i_s_t_a_n_c_e.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=192,190
<span style="display:none;" id="./solutions/walker-0/plumed.datno1">The DISTANCE action with label <b>no1</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">no1.value</td><td>the DISTANCE between this pair of atoms</td></tr></table></span><b name="./solutions/walker-0/plumed.datno2" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.datno2","./solutions/walker-0/plumed.datno2","brown")'>no2</b>: <div class="tooltip" style="color:green">DISTANCE<div class="right">Calculate the distance between a pair of atoms. <a href="https://www.plumed.org/doc-master/user-doc/html/_d_i_s_t_a_n_c_e.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=192,191
<br/><span style="color:blue" class="comment"># Apply walls to restrict the exploration of the CVs if necessary</span>
<span style="display:none;" id="./solutions/walker-0/plumed.datno2">The DISTANCE action with label <b>no2</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">no2.value</td><td>the DISTANCE between this pair of atoms</td></tr></table></span><b name="./solutions/walker-0/plumed.datuwallcv1" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.datuwallcv1","./solutions/walker-0/plumed.datuwallcv1","brown")'>uwallcv1</b>: <div class="tooltip" style="color:green">UPPER_WALLS<div class="right">Defines a wall for the value of one or more collective variables, <a href="https://www.plumed.org/doc-master/user-doc/html/_u_p_p_e_r__w_a_l_l_s.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the arguments on which the bias is acting<i></i></div></div>=<b name="./solutions/walker-0/plumed.datcv1">cv1</b> <div class="tooltip">AT<div class="right">the positions of the wall<i></i></div></div>=0.40 <div class="tooltip">KAPPA<div class="right">the force constant for the wall<i></i></div></div>=10000.0
<span style="display:none;" id="./solutions/walker-0/plumed.datuwallcv1">The UPPER_WALLS action with label <b>uwallcv1</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">uwallcv1.bias</td><td>the instantaneous value of the bias potential</td></tr><tr><td width="5%">uwallcv1.force2</td><td>the instantaneous value of the squared force due to this bias potential</td></tr></table></span><b name="./solutions/walker-0/plumed.datuwall1" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.datuwall1","./solutions/walker-0/plumed.datuwall1","brown")'>uwall1</b>: <div class="tooltip" style="color:green">UPPER_WALLS<div class="right">Defines a wall for the value of one or more collective variables, <a href="https://www.plumed.org/doc-master/user-doc/html/_u_p_p_e_r__w_a_l_l_s.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the arguments on which the bias is acting<i></i></div></div>=<b name="./solutions/walker-0/plumed.datno1">no1</b> <div class="tooltip">AT<div class="right">the positions of the wall<i></i></div></div>=0.15 <div class="tooltip">KAPPA<div class="right">the force constant for the wall<i></i></div></div>=10000.0
<span style="display:none;" id="./solutions/walker-0/plumed.datuwall1">The UPPER_WALLS action with label <b>uwall1</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">uwall1.bias</td><td>the instantaneous value of the bias potential</td></tr><tr><td width="5%">uwall1.force2</td><td>the instantaneous value of the squared force due to this bias potential</td></tr></table></span><b name="./solutions/walker-0/plumed.datuwall2" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.datuwall2","./solutions/walker-0/plumed.datuwall2","brown")'>uwall2</b>: <div class="tooltip" style="color:green">UPPER_WALLS<div class="right">Defines a wall for the value of one or more collective variables, <a href="https://www.plumed.org/doc-master/user-doc/html/_u_p_p_e_r__w_a_l_l_s.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the arguments on which the bias is acting<i></i></div></div>=<b name="./solutions/walker-0/plumed.datno2">no2</b> <div class="tooltip">AT<div class="right">the positions of the wall<i></i></div></div>=0.15 <div class="tooltip">KAPPA<div class="right">the force constant for the wall<i></i></div></div>=10000.0
<span style="display:none;" id="./solutions/walker-0/plumed.datuwall2">The UPPER_WALLS action with label <b>uwall2</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">uwall2.bias</td><td>the instantaneous value of the bias potential</td></tr><tr><td width="5%">uwall2.force2</td><td>the instantaneous value of the squared force due to this bias potential</td></tr></table></span><b name="./solutions/walker-0/plumed.datuwallcv2" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.datuwallcv2","./solutions/walker-0/plumed.datuwallcv2","brown")'>uwallcv2</b>: <div class="tooltip" style="color:green">UPPER_WALLS<div class="right">Defines a wall for the value of one or more collective variables, <a href="https://www.plumed.org/doc-master/user-doc/html/_u_p_p_e_r__w_a_l_l_s.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the arguments on which the bias is acting<i></i></div></div>=<b name="./solutions/walker-0/plumed.datcv2">cv2</b> <div class="tooltip">AT<div class="right">the positions of the wall<i></i></div></div>=5.0 <div class="tooltip">KAPPA<div class="right">the force constant for the wall<i></i></div></div>=10000.0
<br/><span style="color:blue" class="comment"># Setup of the multiple walkers metadynamics simulations</span>
<span style="display:none;" id="./solutions/walker-0/plumed.datuwallcv2">The UPPER_WALLS action with label <b>uwallcv2</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">uwallcv2.bias</td><td>the instantaneous value of the bias potential</td></tr><tr><td width="5%">uwallcv2.force2</td><td>the instantaneous value of the squared force due to this bias potential</td></tr></table></span><b name="./solutions/walker-0/plumed.datmetad" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.datmetad","./solutions/walker-0/plumed.datmetad","brown")'>metad</b>: <div class="tooltip" style="color:green">METAD<div class="right">Used to performed metadynamics on one or more collective variables. <a href="https://www.plumed.org/doc-master/user-doc/html/_m_e_t_a_d.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the labels of the scalars on which the bias will act<i></i></div></div>=<b name="./solutions/walker-0/plumed.datcv1">cv1</b>,<b name="./solutions/walker-0/plumed.datcv2">cv2</b> <div class="tooltip">SIGMA<div class="right">the widths of the Gaussian hills<i></i></div></div>=0.01,0.05 <div class="tooltip">HEIGHT<div class="right">the heights of the Gaussian hills<i></i></div></div>=5.0 <div class="tooltip">PACE<div class="right">the frequency for hill addition<i></i></div></div>=100 <div class="tooltip">TEMP<div class="right">the system temperature - this is only needed if you are doing well-tempered metadynamics<i></i></div></div>=300.0 <div class="tooltip">BIASFACTOR<div class="right">use well tempered metadynamics and use this bias factor<i></i></div></div>=15 <div class="tooltip">GRID_MIN<div class="right">the lower bounds for the grid<i></i></div></div>=0.00,0.00 <div class="tooltip">GRID_MAX<div class="right">the upper bounds for the grid<i></i></div></div>=0.5,6.0 <div class="tooltip">CALC_RCT<div class="right"> calculate the c(t) reweighting factor and use that to obtain the normalized bias [rbias=bias-rct]<i></i></div></div> <div class="tooltip">RCT_USTRIDE<div class="right">the update stride for calculating the c(t) reweighting factor<i></i></div></div>=10 <div class="tooltip">WALKERS_N<div class="right">number of walkers<i></i></div></div>=<span style="background-color:yellow">__FILL__</span> <div class="tooltip">WALKERS_ID<div class="right">walker id<i></i></div></div>=<span style="background-color:yellow">__FILL__</span> <div class="tooltip">WALKERS_DIR<div class="right">shared directory with the hills files from all the walkers<i></i></div></div>=<span style="background-color:yellow">__FILL__</span> <div class="tooltip">WALKERS_RSTRIDE<div class="right">stride for reading hills files<i></i></div></div>=<span style="background-color:yellow">__FILL__</span>
<br/><span style="color:blue" class="comment"># Print out the CVs and biases on the fly</span>
<span style="display:none;" id="./solutions/walker-0/plumed.datmetad">The METAD action with label <b>metad</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">metad.bias</td><td>the instantaneous value of the bias potential</td></tr><tr><td width="5%">metad.rbias</td><td>the instantaneous value of the bias normalized using the c(t) reweighting factor [rbias=bias-rct]</td></tr><tr><td width="5%">metad.rct</td><td>the reweighting factor c(t)</td></tr></table></span><div class="tooltip" style="color:green">PRINT<div class="right">Print quantities to a file. <a href="https://www.plumed.org/doc-master/user-doc/html/_p_r_i_n_t.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the labels of the values that you would like to print to the file<i></i></div></div>=<b name="./solutions/walker-0/plumed.datcv1">cv1</b>,<b name="./solutions/walker-0/plumed.datuwallcv1">uwallcv1.bias</b>,<b name="./solutions/walker-0/plumed.datcv2">cv2</b>,<b name="./solutions/walker-0/plumed.datuwallcv2">uwallcv2.bias</b>,<b name="./solutions/walker-0/plumed.datno2_ang_deg">no2_ang_deg</b>,<b name="./solutions/walker-0/plumed.datno1">no1</b>,<b name="./solutions/walker-0/plumed.datuwall1">uwall1.bias</b>,<b name="./solutions/walker-0/plumed.datno2">no2</b>,<b name="./solutions/walker-0/plumed.datuwall2">uwall2.bias</b>,<b name="./solutions/walker-0/plumed.dathbmat1">hbmat1.sum</b>,<b name="./solutions/walker-0/plumed.dathbmat2">hbmat2.sum</b>,<b name="./solutions/walker-0/plumed.datmetad">metad.bias</b>,<b name="./solutions/walker-0/plumed.datmetad">metad.rbias</b> <div class="tooltip">STRIDE<div class="right"> the frequency with which the quantities of interest should be output<i></i></div></div>=10 <div class="tooltip">FILE<div class="right">the name of the file on which to output these quantities<i></i></div></div>=COLVAR
<div class="tooltip" style="color:green">FLUSH<div class="right">This command instructs plumed to flush all the open files with a user specified frequency. <a href="https://www.plumed.org/doc-master/user-doc/html/_f_l_u_s_h.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">STRIDE<div class="right">the frequency with which all the open files should be flushed<i></i></div></div>=100
</pre></div>
<div style="display:none;" id="./solutions/walker-0/plumed.dat_long"><pre style="width=97%;">
<span style="color:blue" class="comment"># Default units in PLUMED</span>
<div class="tooltip" style="color:green">UNITS<div class="right">This command sets the internal units for the code. <a href="https://www.plumed.org/doc-master/user-doc/html/_u_n_i_t_s.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">LENGTH<div class="right">the units of lengths<i></i></div></div>=nm <div class="tooltip">TIME<div class="right">the units of time<i></i></div></div>=ps <div class="tooltip">ENERGY<div class="right">the units of energy<i></i></div></div>=kj/mol
<br/><span style="color:blue" class="comment"># Define the CVs and PLUMED actions</span>
<span style="color:blue" class="comment"># Define the group of hydrogen atoms of water</span>
<span style="display:none;" id="./solutions/walker-0/plumed.dat_sol">The UNITS action with label <b></b> calculates something</span><b name="./solutions/walker-0/plumed.dat_solhw" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.dat_solhw","./solutions/walker-0/plumed.dat_solhw","brown")'>hw</b>: <div class="tooltip" style="color:green">GROUP<div class="right">Define a group of atoms so that a particular list of atoms can be referenced with a single label in definitions of CVs or virtual atoms. <a href="https://www.plumed.org/doc-master/user-doc/html/_g_r_o_u_p.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the numerical indexes for the set of atoms in the group<i></i></div></div>=1,2,5,6,7,9,11,13,15,16,18,19,21,23,25,26,27,29,30,31,33,34,35,36,39,40,43,45,46,47,48,51,52,54,55,57,58,59,61,62,63,65,66,67,68,71,72,73,75,76,78,79,80,81,82,84,85,89,90,91,92,95,96,98,99,100,102,105,106,107,109,110,112,113,115,116,117,119,120,121,122,123,124,126,129,130,132,134,135,136,137,138,140,142,143,144,147,149,151,152,153,155,156,157,158,159,160,161,162,166,167,170,171,173,175,176,177,179,181,182,183,184,186,187,188,189
<br/><span style="color:blue" class="comment"># Define the group of oxygen atoms of water by removing the hydrogen atoms of all water molecules</span>
<span style="display:none;" id="./solutions/walker-0/plumed.dat_solhw">The GROUP action with label <b>hw</b> calculates something</span><b name="./solutions/walker-0/plumed.dat_solow" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.dat_solow","./solutions/walker-0/plumed.dat_solow","brown")'>ow</b>: <div class="tooltip" style="color:green">GROUP<div class="right">Define a group of atoms so that a particular list of atoms can be referenced with a single label in definitions of CVs or virtual atoms. <a href="https://www.plumed.org/doc-master/user-doc/html/_g_r_o_u_p.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the numerical indexes for the set of atoms in the group<i></i></div></div>=1-189 <div class="tooltip">REMOVE<div class="right">remove these atoms from the list<i></i></div></div>=<b name="./solutions/walker-0/plumed.dat_solhw">hw</b>
<br/><span style="color:blue" class="comment"># Define the first CV being biased, the N-O bond being dissociated</span>
<span style="display:none;" id="./solutions/walker-0/plumed.dat_solow">The GROUP action with label <b>ow</b> calculates something</span><b name="./solutions/walker-0/plumed.dat_solcv1" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.dat_solcv1","./solutions/walker-0/plumed.dat_solcv1","brown")'>cv1</b>: <div class="tooltip" style="color:green">DISTANCE<div class="right">Calculate the distance between a pair of atoms. <a href="https://www.plumed.org/doc-master/user-doc/html/_d_i_s_t_a_n_c_e.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=192,193
<br/><span style="color:blue" class="comment"># Define the second CV being biased, the number of hydrogen atoms of water surrounding the NO2 fragment of the nitrate anion</span>
<span style="display:none;" id="./solutions/walker-0/plumed.dat_solcv1">The DISTANCE action with label <b>cv1</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">cv1.value</td><td>the DISTANCE between this pair of atoms</td></tr></table></span><b name="./solutions/walker-0/plumed.dat_solcn" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.dat_solcn","./solutions/walker-0/plumed.dat_solcn","brown")'>cn</b>: <div class="tooltip" style="color:green">COORDINATION<div class="right">Calculate coordination numbers. <a href="https://www.plumed.org/doc-master/user-doc/html/_c_o_o_r_d_i_n_a_t_i_o_n.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">GROUPA<div class="right">First list of atoms<i></i></div></div>=190,191 <div class="tooltip">GROUPB<div class="right">Second list of atoms (if empty, N*(N-1)/2 pairs in GROUPA are counted)<i></i></div></div>=<b name="./solutions/walker-0/plumed.dat_solhw">hw</b> <div class="tooltip">R_0<div class="right">The r_0 parameter of the switching function<i></i></div></div>=0.255 <div class="tooltip">NN<div class="right"> The n parameter of the switching function <i></i></div></div>=8 <div class="tooltip">MM<div class="right"> The m parameter of the switching function; 0 implies 2*NN<i></i></div></div>=16
<span style="display:none;" id="./solutions/walker-0/plumed.dat_solcn">The COORDINATION action with label <b>cn</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">cn.value</td><td>the value of the coordination</td></tr></table></span><b name="./solutions/walker-0/plumed.dat_solcv2" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.dat_solcv2","./solutions/walker-0/plumed.dat_solcv2","brown")'>cv2</b>: <div class="tooltip" style="color:green">CUSTOM<div class="right">Calculate a combination of variables using a custom expression. <a href="https://www.plumed.org/doc-master/user-doc/html/_c_u_s_t_o_m.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the values input to this function<i></i></div></div>=<b name="./solutions/walker-0/plumed.dat_solcn">cn</b> <div class="tooltip">FUNC<div class="right">the function you wish to evaluate<i></i></div></div>=x*0.5 <div class="tooltip">PERIODIC<div class="right">if the output of your function is periodic then you should specify the periodicity of the function<i></i></div></div>=NO
<br/><span style="color:blue" class="comment"># Define other CVs for monitoring or post-processing</span>
<span style="display:none;" id="./solutions/walker-0/plumed.dat_solcv2">The CUSTOM action with label <b>cv2</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">cv2.value</td><td>an arbitrary function</td></tr></table></span><b name="./solutions/walker-0/plumed.dat_solhbmat1" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.dat_solhbmat1","./solutions/walker-0/plumed.dat_solhbmat1","brown")'>hbmat1</b>: <div class="tooltip" style="color:green">HBOND_MATRIX<div class="right">Adjacency matrix in which two atoms are adjacent if there is a hydrogen bond between them. <a href="https://www.plumed.org/doc-master/user-doc/html/_h_b_o_n_d__m_a_t_r_i_x.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ACCEPTORS<div class="right">The list of atoms which can accept a hydrogen bond<i></i></div></div>=193 <div class="tooltip">HYDROGENS<div class="right">The list of atoms that can form the bridge between the two interesting parts of the structure<i></i></div></div>=<b name="./solutions/walker-0/plumed.dat_solhw">hw</b> <div class="tooltip">DONORS<div class="right">The list of atoms which can donate a hydrogen bond<i></i></div></div>=<b name="./solutions/walker-0/plumed.dat_solow">ow</b> <div class="tooltip">SWITCH<div class="right">The switchingfunction that specifies how close a pair of atoms must be together for there to be a hydrogen bond between them<i></i></div></div>={RATIONAL R_0=0.345 NN=8 MM=16} <div class="tooltip">HSWITCH<div class="right">The switchingfunction that specifies how close the hydrogen must be to the donor atom of the hydrogen bond for it to be considered a hydrogen bond<i></i></div></div>={RATIONAL R_0=0.115 NN=12 MM=24} <div class="tooltip">ASWITCH<div class="right">A switchingfunction that is used to specify what the angle between the vector connecting the donor atom to the acceptor atom and the vector connecting the donor atom to the hydrogen must be in order for it considered to be a hydrogen bond<i></i></div></div>={RATIONAL R_0=0.167pi NN=6 MM=12} SUM
<span style="display:none;" id="./solutions/walker-0/plumed.dat_solhbmat1">The HBOND_MATRIX action with label <b>hbmat1</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">hbmat1.value</td><td>a matrix containing the weights for the bonds between each pair of atoms</td></tr></table></span><b name="./solutions/walker-0/plumed.dat_solhbmat2" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.dat_solhbmat2","./solutions/walker-0/plumed.dat_solhbmat2","brown")'>hbmat2</b>: <div class="tooltip" style="color:green">HBOND_MATRIX<div class="right">Adjacency matrix in which two atoms are adjacent if there is a hydrogen bond between them. <a href="https://www.plumed.org/doc-master/user-doc/html/_h_b_o_n_d__m_a_t_r_i_x.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ACCEPTORS<div class="right">The list of atoms which can accept a hydrogen bond<i></i></div></div>=190,191 <div class="tooltip">HYDROGENS<div class="right">The list of atoms that can form the bridge between the two interesting parts of the structure<i></i></div></div>=<b name="./solutions/walker-0/plumed.dat_solhw">hw</b> <div class="tooltip">DONORS<div class="right">The list of atoms which can donate a hydrogen bond<i></i></div></div>=<b name="./solutions/walker-0/plumed.dat_solow">ow</b> <div class="tooltip">SWITCH<div class="right">The switchingfunction that specifies how close a pair of atoms must be together for there to be a hydrogen bond between them<i></i></div></div>={RATIONAL R_0=0.345 NN=8 MM=16} <div class="tooltip">HSWITCH<div class="right">The switchingfunction that specifies how close the hydrogen must be to the donor atom of the hydrogen bond for it to be considered a hydrogen bond<i></i></div></div>={RATIONAL R_0=0.115 NN=12 MM=24} <div class="tooltip">ASWITCH<div class="right">A switchingfunction that is used to specify what the angle between the vector connecting the donor atom to the acceptor atom and the vector connecting the donor atom to the hydrogen must be in order for it considered to be a hydrogen bond<i></i></div></div>={RATIONAL R_0=0.167pi NN=6 MM=12} SUM
<span style="display:none;" id="./solutions/walker-0/plumed.dat_solhbmat2">The HBOND_MATRIX action with label <b>hbmat2</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">hbmat2.value</td><td>a matrix containing the weights for the bonds between each pair of atoms</td></tr></table></span><b name="./solutions/walker-0/plumed.dat_solno2_ang" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.dat_solno2_ang","./solutions/walker-0/plumed.dat_solno2_ang","brown")'>no2_ang</b>: <div class="tooltip" style="color:green">ANGLE<div class="right">Calculate an angle. <a href="https://www.plumed.org/doc-master/user-doc/html/_a_n_g_l_e.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the list of atoms involved in this collective variable (either 3 or 4 atoms)<i></i></div></div>=190,192,191
<span style="display:none;" id="./solutions/walker-0/plumed.dat_solno2_ang">The ANGLE action with label <b>no2_ang</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">no2_ang.value</td><td>the ANGLE involving these atoms</td></tr></table></span><b name="./solutions/walker-0/plumed.dat_solno2_ang_deg" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.dat_solno2_ang_deg","./solutions/walker-0/plumed.dat_solno2_ang_deg","brown")'>no2_ang_deg</b>: <div class="tooltip" style="color:green">CUSTOM<div class="right">Calculate a combination of variables using a custom expression. <a href="https://www.plumed.org/doc-master/user-doc/html/_c_u_s_t_o_m.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the values input to this function<i></i></div></div>=<b name="./solutions/walker-0/plumed.dat_solno2_ang">no2_ang</b> <div class="tooltip">FUNC<div class="right">the function you wish to evaluate<i></i></div></div>=x/pi*180 <div class="tooltip">PERIODIC<div class="right">if the output of your function is periodic then you should specify the periodicity of the function<i></i></div></div>=NO
<span style="display:none;" id="./solutions/walker-0/plumed.dat_solno2_ang_deg">The CUSTOM action with label <b>no2_ang_deg</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">no2_ang_deg.value</td><td>an arbitrary function</td></tr></table></span><b name="./solutions/walker-0/plumed.dat_solno1" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.dat_solno1","./solutions/walker-0/plumed.dat_solno1","brown")'>no1</b>: <div class="tooltip" style="color:green">DISTANCE<div class="right">Calculate the distance between a pair of atoms. <a href="https://www.plumed.org/doc-master/user-doc/html/_d_i_s_t_a_n_c_e.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=192,190
<span style="display:none;" id="./solutions/walker-0/plumed.dat_solno1">The DISTANCE action with label <b>no1</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">no1.value</td><td>the DISTANCE between this pair of atoms</td></tr></table></span><b name="./solutions/walker-0/plumed.dat_solno2" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.dat_solno2","./solutions/walker-0/plumed.dat_solno2","brown")'>no2</b>: <div class="tooltip" style="color:green">DISTANCE<div class="right">Calculate the distance between a pair of atoms. <a href="https://www.plumed.org/doc-master/user-doc/html/_d_i_s_t_a_n_c_e.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=192,191
<br/><span style="color:blue" class="comment"># Apply walls to restrict the exploration of the CVs if necessary</span>
<span style="display:none;" id="./solutions/walker-0/plumed.dat_solno2">The DISTANCE action with label <b>no2</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">no2.value</td><td>the DISTANCE between this pair of atoms</td></tr></table></span><b name="./solutions/walker-0/plumed.dat_soluwallcv1" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.dat_soluwallcv1","./solutions/walker-0/plumed.dat_soluwallcv1","brown")'>uwallcv1</b>: <div class="tooltip" style="color:green">UPPER_WALLS<div class="right">Defines a wall for the value of one or more collective variables, <a href="https://www.plumed.org/doc-master/user-doc/html/_u_p_p_e_r__w_a_l_l_s.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the arguments on which the bias is acting<i></i></div></div>=<b name="./solutions/walker-0/plumed.dat_solcv1">cv1</b> <div class="tooltip">AT<div class="right">the positions of the wall<i></i></div></div>=0.40 <div class="tooltip">KAPPA<div class="right">the force constant for the wall<i></i></div></div>=10000.0
<span style="display:none;" id="./solutions/walker-0/plumed.dat_soluwallcv1">The UPPER_WALLS action with label <b>uwallcv1</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">uwallcv1.bias</td><td>the instantaneous value of the bias potential</td></tr><tr><td width="5%">uwallcv1.force2</td><td>the instantaneous value of the squared force due to this bias potential</td></tr></table></span><b name="./solutions/walker-0/plumed.dat_soluwall1" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.dat_soluwall1","./solutions/walker-0/plumed.dat_soluwall1","brown")'>uwall1</b>: <div class="tooltip" style="color:green">UPPER_WALLS<div class="right">Defines a wall for the value of one or more collective variables, <a href="https://www.plumed.org/doc-master/user-doc/html/_u_p_p_e_r__w_a_l_l_s.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the arguments on which the bias is acting<i></i></div></div>=<b name="./solutions/walker-0/plumed.dat_solno1">no1</b> <div class="tooltip">AT<div class="right">the positions of the wall<i></i></div></div>=0.15 <div class="tooltip">KAPPA<div class="right">the force constant for the wall<i></i></div></div>=10000.0
<span style="display:none;" id="./solutions/walker-0/plumed.dat_soluwall1">The UPPER_WALLS action with label <b>uwall1</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">uwall1.bias</td><td>the instantaneous value of the bias potential</td></tr><tr><td width="5%">uwall1.force2</td><td>the instantaneous value of the squared force due to this bias potential</td></tr></table></span><b name="./solutions/walker-0/plumed.dat_soluwall2" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.dat_soluwall2","./solutions/walker-0/plumed.dat_soluwall2","brown")'>uwall2</b>: <div class="tooltip" style="color:green">UPPER_WALLS<div class="right">Defines a wall for the value of one or more collective variables, <a href="https://www.plumed.org/doc-master/user-doc/html/_u_p_p_e_r__w_a_l_l_s.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the arguments on which the bias is acting<i></i></div></div>=<b name="./solutions/walker-0/plumed.dat_solno2">no2</b> <div class="tooltip">AT<div class="right">the positions of the wall<i></i></div></div>=0.15 <div class="tooltip">KAPPA<div class="right">the force constant for the wall<i></i></div></div>=10000.0
<span style="display:none;" id="./solutions/walker-0/plumed.dat_soluwall2">The UPPER_WALLS action with label <b>uwall2</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">uwall2.bias</td><td>the instantaneous value of the bias potential</td></tr><tr><td width="5%">uwall2.force2</td><td>the instantaneous value of the squared force due to this bias potential</td></tr></table></span><b name="./solutions/walker-0/plumed.dat_soluwallcv2" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.dat_soluwallcv2","./solutions/walker-0/plumed.dat_soluwallcv2","brown")'>uwallcv2</b>: <div class="tooltip" style="color:green">UPPER_WALLS<div class="right">Defines a wall for the value of one or more collective variables, <a href="https://www.plumed.org/doc-master/user-doc/html/_u_p_p_e_r__w_a_l_l_s.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the arguments on which the bias is acting<i></i></div></div>=<b name="./solutions/walker-0/plumed.dat_solcv2">cv2</b> <div class="tooltip">AT<div class="right">the positions of the wall<i></i></div></div>=5.0 <div class="tooltip">KAPPA<div class="right">the force constant for the wall<i></i></div></div>=10000.0
<br/><span style="color:blue" class="comment"># Setup of the multiple walkers metadynamics simulations</span>
<span style="display:none;" id="./solutions/walker-0/plumed.dat_soluwallcv2">The UPPER_WALLS action with label <b>uwallcv2</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">uwallcv2.bias</td><td>the instantaneous value of the bias potential</td></tr><tr><td width="5%">uwallcv2.force2</td><td>the instantaneous value of the squared force due to this bias potential</td></tr></table></span><b name="./solutions/walker-0/plumed.dat_solmetad" onclick='showPath("./solutions/walker-0/plumed.dat","./solutions/walker-0/plumed.dat_solmetad","./solutions/walker-0/plumed.dat_solmetad","brown")'>metad</b>: <div class="tooltip" style="color:green">METAD<div class="right">Used to performed metadynamics on one or more collective variables. <a href="https://www.plumed.org/doc-master/user-doc/html/_m_e_t_a_d.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the labels of the scalars on which the bias will act<i></i></div></div>=<b name="./solutions/walker-0/plumed.dat_solcv1">cv1</b>,<b name="./solutions/walker-0/plumed.dat_solcv2">cv2</b> <div class="tooltip">SIGMA<div class="right">the widths of the Gaussian hills<i></i></div></div>=0.01,0.05 <div class="tooltip">HEIGHT<div class="right">the heights of the Gaussian hills<i></i></div></div>=5.0 <div class="tooltip">PACE<div class="right">the frequency for hill addition<i></i></div></div>=100 <div class="tooltip">TEMP<div class="right">the system temperature - this is only needed if you are doing well-tempered metadynamics<i></i></div></div>=300.0 <div class="tooltip">BIASFACTOR<div class="right">use well tempered metadynamics and use this bias factor<i></i></div></div>=15 <div class="tooltip">GRID_MIN<div class="right">the lower bounds for the grid<i></i></div></div>=0.00,0.00 <div class="tooltip">GRID_MAX<div class="right">the upper bounds for the grid<i></i></div></div>=0.5,6.0 <div class="tooltip">CALC_RCT<div class="right"> calculate the c(t) reweighting factor and use that to obtain the normalized bias [rbias=bias-rct]<i></i></div></div> <div class="tooltip">RCT_USTRIDE<div class="right">the update stride for calculating the c(t) reweighting factor<i></i></div></div>=10 <div class="tooltip">WALKERS_N<div class="right">number of walkers<i></i></div></div>=2 <div class="tooltip">WALKERS_ID<div class="right">walker id<i></i></div></div>=0 <div class="tooltip">WALKERS_DIR<div class="right">shared directory with the hills files from all the walkers<i></i></div></div>=<b name="./solutions/walker-0/plumed.dat_sol">../hills</b> <div class="tooltip">WALKERS_RSTRIDE<div class="right">stride for reading hills files<i></i></div></div>=1000
<br/><span style="color:blue" class="comment"># Print out the CVs and biases on the fly</span>
<span style="display:none;" id="./solutions/walker-0/plumed.dat_solmetad">The METAD action with label <b>metad</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">metad.bias</td><td>the instantaneous value of the bias potential</td></tr><tr><td width="5%">metad.rbias</td><td>the instantaneous value of the bias normalized using the c(t) reweighting factor [rbias=bias-rct]</td></tr><tr><td width="5%">metad.rct</td><td>the reweighting factor c(t)</td></tr></table></span><div class="tooltip" style="color:green">PRINT<div class="right">Print quantities to a file. <a href="https://www.plumed.org/doc-master/user-doc/html/_p_r_i_n_t.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the labels of the values that you would like to print to the file<i></i></div></div>=<b name="./solutions/walker-0/plumed.dat_solcv1">cv1</b>,<b name="./solutions/walker-0/plumed.dat_soluwallcv1">uwallcv1.bias</b>,<b name="./solutions/walker-0/plumed.dat_solcv2">cv2</b>,<b name="./solutions/walker-0/plumed.dat_soluwallcv2">uwallcv2.bias</b>,<b name="./solutions/walker-0/plumed.dat_solno2_ang_deg">no2_ang_deg</b>,<b name="./solutions/walker-0/plumed.dat_solno1">no1</b>,<b name="./solutions/walker-0/plumed.dat_soluwall1">uwall1.bias</b>,<b name="./solutions/walker-0/plumed.dat_solno2">no2</b>,<b name="./solutions/walker-0/plumed.dat_soluwall2">uwall2.bias</b>,<b name="./solutions/walker-0/plumed.dat_solhbmat1">hbmat1.sum</b>,<b name="./solutions/walker-0/plumed.dat_solhbmat2">hbmat2.sum</b>,<b name="./solutions/walker-0/plumed.dat_solmetad">metad.bias</b>,<b name="./solutions/walker-0/plumed.dat_solmetad">metad.rbias</b> <div class="tooltip">STRIDE<div class="right"> the frequency with which the quantities of interest should be output<i></i></div></div>=10 <div class="tooltip">FILE<div class="right">the name of the file on which to output these quantities<i></i></div></div>=COLVAR
<div class="tooltip" style="color:green">FLUSH<div class="right">This command instructs plumed to flush all the open files with a user specified frequency. <a href="https://www.plumed.org/doc-master/user-doc/html/_f_l_u_s_h.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">STRIDE<div class="right">the frequency with which all the open files should be flushed<i></i></div></div>=100
</pre></div>

 {% endraw %} 
To set up a metadynamics simulation with multiple walkers, you need to specify the number of walkers by WALKERS_N, the walker index by WALKERS_ID (which starts from 0), the directory which stores the bias potentials by WALKERS_DIR, and the frequency of the walkers reading the bias potential files by WALKERS_RSTRIDE.
