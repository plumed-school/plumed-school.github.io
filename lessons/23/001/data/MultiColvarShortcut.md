# Backwards compatibility for MultiColvar

As discussed in [this article](MultiColvar.md), I have made substantial changes to the way MultiColvars are implemented. In previous version the PLUMED
input to calculate the number of distances are less than 0.1 nm is as follows:

{% raw %}
<div style="width: 100%; float:left">
<div style="width: 90%; float:left" id="value_details_MultiColvarShortcut.md_working_1.dat"> Click on the labels of the actions for more information on what each action computes </div>
<div style="width: 10%; float:left"><table><tr><td style="padding:1px"><a href="MultiColvarShortcut.md_working_1.dat.plumed.stderr"><img src="https://img.shields.io/badge/v2.9-passing-green.svg" alt="tested onv2.9" /></a></td></tr><tr><td style="padding:1px"><a href="MultiColvarShortcut.md_working_1.dat.plumed_master.stderr"><img src="https://img.shields.io/badge/master-passing-green.svg" alt="tested onmaster" /></a></td></tr></table></div></div>
<pre style="width=97%;">
<span id="MultiColvarShortcut.md_working_1.datd1_short"><b name="MultiColvarShortcut.md_working_1.datd1" onclick='showPath("MultiColvarShortcut.md_working_1.dat","MultiColvarShortcut.md_working_1.datd1","MultiColvarShortcut.md_working_1.datd1_shortcut","blue")'>d1</b><span style="display:none;" id="MultiColvarShortcut.md_working_1.datd1_shortcut">The DISTANCES action with label <b>d1</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1</td><td width="5%"><font color="blue">vector</font></td><td>the DISTANCES between the each pair of atoms that were specified</td></tr><tr><td width="5%">d1_lessthan</td><td width="5%"><font color="black">scalar</font></td><td>the number of colvars that have a value less than a threshold</td></tr></table></span>: <div class="tooltip" style="color:green">DISTANCES<div class="right">Calculate the distances between multiple piars of atoms This action is <a class="toggler" href='javascript:;' onclick='toggleDisplay("MultiColvarShortcut.md_working_1.datd1");'>a shortcut</a>. <a href="https://www.plumed.org/doc-master/user-doc/html/_d_i_s_t_a_n_c_e_s.html">More details</a><i></i></div></div> <div class="tooltip">ATOMS1<div class="right">the pairs of atoms that you would like to calculate the angles for<i></i></div></div>=1,2 <div class="tooltip">ATOMS2<div class="right">the pairs of atoms that you would like to calculate the angles for<i></i></div></div>=3,4 <div class="tooltip">ATOMS3<div class="right">the pairs of atoms that you would like to calculate the angles for<i></i></div></div>=5,6 <div class="tooltip">ATOMS4<div class="right">the pairs of atoms that you would like to calculate the angles for<i></i></div></div>=7,8 <div class="tooltip">ATOMS5<div class="right">the pairs of atoms that you would like to calculate the angles for<i></i></div></div>=9,10 <div class="tooltip">LESS_THAN<div class="right">calculate the number of variables that are less than a certain target value<i></i></div></div>={RATIONAL R_0=0.1}
</span><span id="MultiColvarShortcut.md_working_1.datd1_long" style="display:none;"><span style="color:blue" class="comment"># PLUMED interprets the command:
</span><span class="toggler" style="color:red" onclick='toggleDisplay("MultiColvarShortcut.md_working_1.datd1")'># d1: DISTANCES ATOMS1=1,2 ATOMS2=3,4 ATOMS3=5,6 ATOMS4=7,8 ATOMS5=9,10 LESS_THAN={RATIONAL R_0=0.1}</span>
<span style="color:blue" class="comment"># as follows (Click the red comment above to revert to the short version of the input):</span>
<b name="MultiColvarShortcut.md_working_1.datd1_vatom1" onclick='showPath("MultiColvarShortcut.md_working_1.dat","MultiColvarShortcut.md_working_1.datd1_vatom1","MultiColvarShortcut.md_working_1.datd1_vatom1","violet")'>d1_vatom1</b><span style="display:none;" id="MultiColvarShortcut.md_working_1.datd1_vatom1">The CENTER_FAST action with label <b>d1_vatom1</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1_vatom1</td><td width="5%"><font color="violet">atoms</font></td><td>virtual atom calculated by CENTER_FAST action</td></tr></table></span>: <div class="tooltip" style="color:green">CENTER<div class="right">Calculate the center for a group of atoms, with arbitrary weights. <a href="https://www.plumed.org/doc-master/user-doc/html/_c_e_n_t_e_r.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the group of atoms that you are calculating the Gyration Tensor for<i></i></div></div>=1,2 
<b name="MultiColvarShortcut.md_working_1.datd1_vatom2" onclick='showPath("MultiColvarShortcut.md_working_1.dat","MultiColvarShortcut.md_working_1.datd1_vatom2","MultiColvarShortcut.md_working_1.datd1_vatom2","violet")'>d1_vatom2</b><span style="display:none;" id="MultiColvarShortcut.md_working_1.datd1_vatom2">The CENTER_FAST action with label <b>d1_vatom2</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1_vatom2</td><td width="5%"><font color="violet">atoms</font></td><td>virtual atom calculated by CENTER_FAST action</td></tr></table></span>: <div class="tooltip" style="color:green">CENTER<div class="right">Calculate the center for a group of atoms, with arbitrary weights. <a href="https://www.plumed.org/doc-master/user-doc/html/_c_e_n_t_e_r.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the group of atoms that you are calculating the Gyration Tensor for<i></i></div></div>=3,4 
<b name="MultiColvarShortcut.md_working_1.datd1_vatom3" onclick='showPath("MultiColvarShortcut.md_working_1.dat","MultiColvarShortcut.md_working_1.datd1_vatom3","MultiColvarShortcut.md_working_1.datd1_vatom3","violet")'>d1_vatom3</b><span style="display:none;" id="MultiColvarShortcut.md_working_1.datd1_vatom3">The CENTER_FAST action with label <b>d1_vatom3</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1_vatom3</td><td width="5%"><font color="violet">atoms</font></td><td>virtual atom calculated by CENTER_FAST action</td></tr></table></span>: <div class="tooltip" style="color:green">CENTER<div class="right">Calculate the center for a group of atoms, with arbitrary weights. <a href="https://www.plumed.org/doc-master/user-doc/html/_c_e_n_t_e_r.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the group of atoms that you are calculating the Gyration Tensor for<i></i></div></div>=5,6 
<b name="MultiColvarShortcut.md_working_1.datd1_vatom4" onclick='showPath("MultiColvarShortcut.md_working_1.dat","MultiColvarShortcut.md_working_1.datd1_vatom4","MultiColvarShortcut.md_working_1.datd1_vatom4","violet")'>d1_vatom4</b><span style="display:none;" id="MultiColvarShortcut.md_working_1.datd1_vatom4">The CENTER_FAST action with label <b>d1_vatom4</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1_vatom4</td><td width="5%"><font color="violet">atoms</font></td><td>virtual atom calculated by CENTER_FAST action</td></tr></table></span>: <div class="tooltip" style="color:green">CENTER<div class="right">Calculate the center for a group of atoms, with arbitrary weights. <a href="https://www.plumed.org/doc-master/user-doc/html/_c_e_n_t_e_r.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the group of atoms that you are calculating the Gyration Tensor for<i></i></div></div>=7,8 
<b name="MultiColvarShortcut.md_working_1.datd1_vatom5" onclick='showPath("MultiColvarShortcut.md_working_1.dat","MultiColvarShortcut.md_working_1.datd1_vatom5","MultiColvarShortcut.md_working_1.datd1_vatom5","violet")'>d1_vatom5</b><span style="display:none;" id="MultiColvarShortcut.md_working_1.datd1_vatom5">The CENTER_FAST action with label <b>d1_vatom5</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1_vatom5</td><td width="5%"><font color="violet">atoms</font></td><td>virtual atom calculated by CENTER_FAST action</td></tr></table></span>: <div class="tooltip" style="color:green">CENTER<div class="right">Calculate the center for a group of atoms, with arbitrary weights. <a href="https://www.plumed.org/doc-master/user-doc/html/_c_e_n_t_e_r.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the group of atoms that you are calculating the Gyration Tensor for<i></i></div></div>=9,10 
<b name="MultiColvarShortcut.md_working_1.datd1_grp" onclick='showPath("MultiColvarShortcut.md_working_1.dat","MultiColvarShortcut.md_working_1.datd1_grp","MultiColvarShortcut.md_working_1.datd1_grp","violet")'>d1_grp</b><span style="display:none;" id="MultiColvarShortcut.md_working_1.datd1_grp">The GROUP action with label <b>d1_grp</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1_grp</td><td width="5%"><font color="violet">atoms</font></td><td>indices of atoms specified in GROUP</td></tr></table></span>: <div class="tooltip" style="color:green">GROUP<div class="right">Define a group of atoms so that a particular list of atoms can be referenced with a single label in definitions of CVs or virtual atoms. <a href="https://www.plumed.org/doc-master/user-doc/html/_g_r_o_u_p.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the numerical indexes for the set of atoms in the group<i></i></div></div>=<b name="MultiColvarShortcut.md_working_1.datd1_vatom1">d1_vatom1</b>,<b name="MultiColvarShortcut.md_working_1.datd1_vatom2">d1_vatom2</b>,<b name="MultiColvarShortcut.md_working_1.datd1_vatom3">d1_vatom3</b>,<b name="MultiColvarShortcut.md_working_1.datd1_vatom4">d1_vatom4</b>,<b name="MultiColvarShortcut.md_working_1.datd1_vatom5">d1_vatom5</b> 
<b name="MultiColvarShortcut.md_working_1.datd1" onclick='showPath("MultiColvarShortcut.md_working_1.dat","MultiColvarShortcut.md_working_1.datd1","MultiColvarShortcut.md_working_1.datd1","blue")'>d1</b><span style="display:none;" id="MultiColvarShortcut.md_working_1.datd1">The DISTANCE action with label <b>d1</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1</td><td width="5%"><font color="blue">vector</font></td><td>the DISTANCE for each set of specified atoms</td></tr></table></span>: <div class="tooltip" style="color:green">DISTANCE<div class="right">Calculate the distance between a pair of atoms. <a href="https://www.plumed.org/doc-master/user-doc/html/_d_i_s_t_a_n_c_e.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS1<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=1,2 <div class="tooltip">ATOMS2<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=3,4 <div class="tooltip">ATOMS3<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=5,6 <div class="tooltip">ATOMS4<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=7,8 <div class="tooltip">ATOMS5<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=9,10 
<b name="MultiColvarShortcut.md_working_1.datd1_lt" onclick='showPath("MultiColvarShortcut.md_working_1.dat","MultiColvarShortcut.md_working_1.datd1_lt","MultiColvarShortcut.md_working_1.datd1_lt","blue")'>d1_lt</b><span style="display:none;" id="MultiColvarShortcut.md_working_1.datd1_lt">The LESS_THAN action with label <b>d1_lt</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1_lt</td><td width="5%"><font color="blue">vector</font></td><td>the vector obtained by doing an element-wise application of a function that is one if the input is less than a threshold to the input vectors</td></tr></table></span>: <div class="tooltip" style="color:green">LESS_THAN<div class="right">Use a switching function to determine how many of the input variables are less than a certain cutoff. <a href="https://www.plumed.org/doc-master/user-doc/html/_l_e_s_s__t_h_a_n.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the values input to this function<i></i></div></div>=<b name="MultiColvarShortcut.md_working_1.datd1">d1</b> <div class="tooltip">SWITCH<div class="right">This keyword is used if you want to employ an alternative to the continuous swiching function defined above<i></i></div></div>={RATIONAL R_0=0.1}
<b name="MultiColvarShortcut.md_working_1.datd1_lessthan" onclick='showPath("MultiColvarShortcut.md_working_1.dat","MultiColvarShortcut.md_working_1.datd1_lessthan","MultiColvarShortcut.md_working_1.datd1_lessthan","black")'>d1_lessthan</b><span style="display:none;" id="MultiColvarShortcut.md_working_1.datd1_lessthan">The SUM action with label <b>d1_lessthan</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1_lessthan</td><td width="5%"><font color="black">scalar</font></td><td>the sum of all the elements in the input vector</td></tr></table></span>: <div class="tooltip" style="color:green">SUM<div class="right">Calculate the sum of the arguments <a href="https://www.plumed.org/doc-master/user-doc/html/_s_u_m.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the values input to this function<i></i></div></div>=<b name="MultiColvarShortcut.md_working_1.datd1_lt">d1_lt</b> <div class="tooltip">PERIODIC<div class="right">if the output of your function is periodic then you should specify the periodicity of the function<i></i></div></div>=NO
<span style="color:blue"># --- End of included input --- </span></span><div class="tooltip" style="color:green">PRINT<div class="right">Print quantities to a file. <a href="https://www.plumed.org/doc-master/user-doc/html/_p_r_i_n_t.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the labels of the values that you would like to print to the file<i></i></div></div>=<b name="MultiColvarShortcut.md_working_1.datd1">d1.lessthan</b> <div class="tooltip">FILE<div class="right">the name of the file on which to output these quantities<i></i></div></div>=colvar
</pre>
 {% endraw %} 

Now, however, the same operation is achieved by the following code:

{% raw %}
<div style="width: 100%; float:left">
<div style="width: 90%; float:left" id="value_details_MultiColvarShortcut.md_working_2.dat"> Click on the labels of the actions for more information on what each action computes </div>
<div style="width: 10%; float:left"><table><tr><td style="padding:1px"><a href="MultiColvarShortcut.md_working_2.dat.plumed.stderr"><img src="https://img.shields.io/badge/v2.9-failed-red.svg" alt="tested onv2.9" /></a></td></tr><tr><td style="padding:1px"><a href="MultiColvarShortcut.md_working_2.dat.plumed_master.stderr"><img src="https://img.shields.io/badge/master-passing-green.svg" alt="tested onmaster" /></a></td></tr></table></div></div>
<pre style="width=97%;">
<b name="MultiColvarShortcut.md_working_2.datd1" onclick='showPath("MultiColvarShortcut.md_working_2.dat","MultiColvarShortcut.md_working_2.datd1","MultiColvarShortcut.md_working_2.datd1","blue")'>d1</b><span style="display:none;" id="MultiColvarShortcut.md_working_2.datd1">The DISTANCE action with label <b>d1</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1</td><td width="5%"><font color="blue">vector</font></td><td>the DISTANCE for each set of specified atoms</td></tr></table></span>: <div class="tooltip" style="color:green">DISTANCE<div class="right">Calculate the distance between a pair of atoms. <a href="https://www.plumed.org/doc-master/user-doc/html/_d_i_s_t_a_n_c_e.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS1<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=1,2 <div class="tooltip">ATOMS2<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=3,4 <div class="tooltip">ATOMS3<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=5,6 <div class="tooltip">ATOMS4<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=7,8 <div class="tooltip">ATOMS5<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=9,10
<b name="MultiColvarShortcut.md_working_2.datd1_lt" onclick='showPath("MultiColvarShortcut.md_working_2.dat","MultiColvarShortcut.md_working_2.datd1_lt","MultiColvarShortcut.md_working_2.datd1_lt","blue")'>d1_lt</b><span style="display:none;" id="MultiColvarShortcut.md_working_2.datd1_lt">The LESS_THAN action with label <b>d1_lt</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1_lt</td><td width="5%"><font color="blue">vector</font></td><td>the vector obtained by doing an element-wise application of a function that is one if the input is less than a threshold to the input vectors</td></tr></table></span>: <div class="tooltip" style="color:green">LESS_THAN<div class="right">Use a switching function to determine how many of the input variables are less than a certain cutoff. <a href="https://www.plumed.org/doc-master/user-doc/html/_l_e_s_s__t_h_a_n.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the values input to this function<i></i></div></div>=<b name="MultiColvarShortcut.md_working_2.datd1">d1</b> <div class="tooltip">SWITCH<div class="right">This keyword is used if you want to employ an alternative to the continuous swiching function defined above<i></i></div></div>={RATIONAL R_0=0.1}
<b name="MultiColvarShortcut.md_working_2.datd1_lessthan" onclick='showPath("MultiColvarShortcut.md_working_2.dat","MultiColvarShortcut.md_working_2.datd1_lessthan","MultiColvarShortcut.md_working_2.datd1_lessthan","black")'>d1_lessthan</b><span style="display:none;" id="MultiColvarShortcut.md_working_2.datd1_lessthan">The SUM action with label <b>d1_lessthan</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1_lessthan</td><td width="5%"><font color="black">scalar</font></td><td>the sum of all the elements in the input vector</td></tr></table></span>: <div class="tooltip" style="color:green">SUM<div class="right">Calculate the sum of the arguments <a href="https://www.plumed.org/doc-master/user-doc/html/_s_u_m.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the values input to this function<i></i></div></div>=<b name="MultiColvarShortcut.md_working_2.datd1_lt">d1_lt</b> <div class="tooltip">PERIODIC<div class="right">if the output of your function is periodic then you should specify the periodicity of the function<i></i></div></div>=NO
<div class="tooltip" style="color:green">PRINT<div class="right">Print quantities to a file. <a href="https://www.plumed.org/doc-master/user-doc/html/_p_r_i_n_t.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the labels of the values that you would like to print to the file<i></i></div></div>=<b name="MultiColvarShortcut.md_working_2.datd1_lessthan">d1_lessthan</b> <div class="tooltip">FILE<div class="right">the name of the file on which to output these quantities<i></i></div></div>=colvar
</pre>
 {% endraw %} 

Obviously, we do not want users to have to re-learn PLUMED because there have been changes to the code.  In other words, we want to ensure that the first
input above continues to work with the new version of the code.  

## Shortcut actions

It is straightforward to write code that allows users to use the old old PLUMED input syntax.  It is a matter of simply using shortcut actions to read 
the input for actions that are no longer implemented and convert them to the new input.  In other words, and for the example above, the command
DISTANCES is connected to a class that inherits from ActionShortcut.  In the constructor for this object the new input could be created as follows:

```c++
std::string inum, atomstr;  
for(unsigned i=1;;++i) {
    std::string atstring; parseNumbered("ATOMS",i,atstring);
    if( atstring.length()==0 ) break;
    Tools::convert( i, inum ); atomstr += " ATOMS" + inum + "=" + atstring;
}
// Create the action to compute all the distances
readInputLine( getShortcutLabel() + ": DISTANCE" + atomsstr );
// Create the LESS_THAN line
std::string lt_string; parse("LESS_THAN", lt_string );
readInputLine( getShortcutLabel() + "_lt: LESS_THAN ARG=" + getShortcutLabel() + " SWITCH={" + lt_string + "}");
// And finally the sum
readInputLine( getShortcutLabel() + "_lessthan: SUM ARG=" + getShortcutLabel() + "_lt PERIODIC=NO");
```  

This is the essense of what is done in `multicolvar/Distances.cpp` which is where the DISTANCES command is implemented within PLUMED.  The actual code 
is slightly more complicated as DISTANCES allowed for more options than simply LESS_THAN.  However, the key point I am trying to explain here is how 
we can use ActionShortcut objects to implement a single-line version of the three-line input required to calculate the number of distances that are less than 0.1 nm.

## Components of Shortcut actions

Before concluding there is one final thing I need to explain for you to fully understand how these ActionShortcut objects work. There is a wrinkle that is best 
understood by considering the following (old-style) PLUMED input again:

{% raw %}
<div style="width: 100%; float:left">
<div style="width: 90%; float:left" id="value_details_MultiColvarShortcut.md_working_3.dat"> Click on the labels of the actions for more information on what each action computes </div>
<div style="width: 10%; float:left"><table><tr><td style="padding:1px"><a href="MultiColvarShortcut.md_working_3.dat.plumed.stderr"><img src="https://img.shields.io/badge/v2.9-passing-green.svg" alt="tested onv2.9" /></a></td></tr><tr><td style="padding:1px"><a href="MultiColvarShortcut.md_working_3.dat.plumed_master.stderr"><img src="https://img.shields.io/badge/master-passing-green.svg" alt="tested onmaster" /></a></td></tr></table></div></div>
<pre style="width=97%;">
<span style="color:blue" class="comment"># This is a shortcut</span>
<span id="MultiColvarShortcut.md_working_3.datd1_short"><b name="MultiColvarShortcut.md_working_3.datd1" onclick='showPath("MultiColvarShortcut.md_working_3.dat","MultiColvarShortcut.md_working_3.datd1","MultiColvarShortcut.md_working_3.datd1_shortcut","blue")'>d1</b><span style="display:none;" id="MultiColvarShortcut.md_working_3.datd1_shortcut">The DISTANCES action with label <b>d1</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1</td><td width="5%"><font color="blue">vector</font></td><td>the DISTANCES between the each pair of atoms that were specified</td></tr><tr><td width="5%">d1_lessthan</td><td width="5%"><font color="black">scalar</font></td><td>the number of colvars that have a value less than a threshold</td></tr></table></span>: <div class="tooltip" style="color:green">DISTANCES<div class="right">Calculate the distances between multiple piars of atoms This action is <a class="toggler" href='javascript:;' onclick='toggleDisplay("MultiColvarShortcut.md_working_3.datd1");'>a shortcut</a>. <a href="https://www.plumed.org/doc-master/user-doc/html/_d_i_s_t_a_n_c_e_s.html">More details</a><i></i></div></div> <div class="tooltip">ATOMS1<div class="right">the pairs of atoms that you would like to calculate the angles for<i></i></div></div>=1,2 <div class="tooltip">ATOMS2<div class="right">the pairs of atoms that you would like to calculate the angles for<i></i></div></div>=3,4 <div class="tooltip">ATOMS3<div class="right">the pairs of atoms that you would like to calculate the angles for<i></i></div></div>=5,6 <div class="tooltip">ATOMS4<div class="right">the pairs of atoms that you would like to calculate the angles for<i></i></div></div>=7,8 <div class="tooltip">ATOMS5<div class="right">the pairs of atoms that you would like to calculate the angles for<i></i></div></div>=9,10 <div class="tooltip">LESS_THAN<div class="right">calculate the number of variables that are less than a certain target value<i></i></div></div>={RATIONAL R_0=0.1}
</span><span id="MultiColvarShortcut.md_working_3.datd1_long" style="display:none;"><span style="color:blue" class="comment"># PLUMED interprets the command:
</span><span class="toggler" style="color:red" onclick='toggleDisplay("MultiColvarShortcut.md_working_3.datd1")'># d1: DISTANCES ATOMS1=1,2 ATOMS2=3,4 ATOMS3=5,6 ATOMS4=7,8 ATOMS5=9,10 LESS_THAN={RATIONAL R_0=0.1}</span>
<span style="color:blue" class="comment"># as follows (Click the red comment above to revert to the short version of the input):</span>
<b name="MultiColvarShortcut.md_working_3.datd1_vatom1" onclick='showPath("MultiColvarShortcut.md_working_3.dat","MultiColvarShortcut.md_working_3.datd1_vatom1","MultiColvarShortcut.md_working_3.datd1_vatom1","violet")'>d1_vatom1</b><span style="display:none;" id="MultiColvarShortcut.md_working_3.datd1_vatom1">The CENTER_FAST action with label <b>d1_vatom1</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1_vatom1</td><td width="5%"><font color="violet">atoms</font></td><td>virtual atom calculated by CENTER_FAST action</td></tr></table></span>: <div class="tooltip" style="color:green">CENTER<div class="right">Calculate the center for a group of atoms, with arbitrary weights. <a href="https://www.plumed.org/doc-master/user-doc/html/_c_e_n_t_e_r.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the group of atoms that you are calculating the Gyration Tensor for<i></i></div></div>=1,2 
<b name="MultiColvarShortcut.md_working_3.datd1_vatom2" onclick='showPath("MultiColvarShortcut.md_working_3.dat","MultiColvarShortcut.md_working_3.datd1_vatom2","MultiColvarShortcut.md_working_3.datd1_vatom2","violet")'>d1_vatom2</b><span style="display:none;" id="MultiColvarShortcut.md_working_3.datd1_vatom2">The CENTER_FAST action with label <b>d1_vatom2</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1_vatom2</td><td width="5%"><font color="violet">atoms</font></td><td>virtual atom calculated by CENTER_FAST action</td></tr></table></span>: <div class="tooltip" style="color:green">CENTER<div class="right">Calculate the center for a group of atoms, with arbitrary weights. <a href="https://www.plumed.org/doc-master/user-doc/html/_c_e_n_t_e_r.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the group of atoms that you are calculating the Gyration Tensor for<i></i></div></div>=3,4 
<b name="MultiColvarShortcut.md_working_3.datd1_vatom3" onclick='showPath("MultiColvarShortcut.md_working_3.dat","MultiColvarShortcut.md_working_3.datd1_vatom3","MultiColvarShortcut.md_working_3.datd1_vatom3","violet")'>d1_vatom3</b><span style="display:none;" id="MultiColvarShortcut.md_working_3.datd1_vatom3">The CENTER_FAST action with label <b>d1_vatom3</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1_vatom3</td><td width="5%"><font color="violet">atoms</font></td><td>virtual atom calculated by CENTER_FAST action</td></tr></table></span>: <div class="tooltip" style="color:green">CENTER<div class="right">Calculate the center for a group of atoms, with arbitrary weights. <a href="https://www.plumed.org/doc-master/user-doc/html/_c_e_n_t_e_r.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the group of atoms that you are calculating the Gyration Tensor for<i></i></div></div>=5,6 
<b name="MultiColvarShortcut.md_working_3.datd1_vatom4" onclick='showPath("MultiColvarShortcut.md_working_3.dat","MultiColvarShortcut.md_working_3.datd1_vatom4","MultiColvarShortcut.md_working_3.datd1_vatom4","violet")'>d1_vatom4</b><span style="display:none;" id="MultiColvarShortcut.md_working_3.datd1_vatom4">The CENTER_FAST action with label <b>d1_vatom4</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1_vatom4</td><td width="5%"><font color="violet">atoms</font></td><td>virtual atom calculated by CENTER_FAST action</td></tr></table></span>: <div class="tooltip" style="color:green">CENTER<div class="right">Calculate the center for a group of atoms, with arbitrary weights. <a href="https://www.plumed.org/doc-master/user-doc/html/_c_e_n_t_e_r.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the group of atoms that you are calculating the Gyration Tensor for<i></i></div></div>=7,8 
<b name="MultiColvarShortcut.md_working_3.datd1_vatom5" onclick='showPath("MultiColvarShortcut.md_working_3.dat","MultiColvarShortcut.md_working_3.datd1_vatom5","MultiColvarShortcut.md_working_3.datd1_vatom5","violet")'>d1_vatom5</b><span style="display:none;" id="MultiColvarShortcut.md_working_3.datd1_vatom5">The CENTER_FAST action with label <b>d1_vatom5</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1_vatom5</td><td width="5%"><font color="violet">atoms</font></td><td>virtual atom calculated by CENTER_FAST action</td></tr></table></span>: <div class="tooltip" style="color:green">CENTER<div class="right">Calculate the center for a group of atoms, with arbitrary weights. <a href="https://www.plumed.org/doc-master/user-doc/html/_c_e_n_t_e_r.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the group of atoms that you are calculating the Gyration Tensor for<i></i></div></div>=9,10 
<b name="MultiColvarShortcut.md_working_3.datd1_grp" onclick='showPath("MultiColvarShortcut.md_working_3.dat","MultiColvarShortcut.md_working_3.datd1_grp","MultiColvarShortcut.md_working_3.datd1_grp","violet")'>d1_grp</b><span style="display:none;" id="MultiColvarShortcut.md_working_3.datd1_grp">The GROUP action with label <b>d1_grp</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1_grp</td><td width="5%"><font color="violet">atoms</font></td><td>indices of atoms specified in GROUP</td></tr></table></span>: <div class="tooltip" style="color:green">GROUP<div class="right">Define a group of atoms so that a particular list of atoms can be referenced with a single label in definitions of CVs or virtual atoms. <a href="https://www.plumed.org/doc-master/user-doc/html/_g_r_o_u_p.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the numerical indexes for the set of atoms in the group<i></i></div></div>=<b name="MultiColvarShortcut.md_working_3.datd1_vatom1">d1_vatom1</b>,<b name="MultiColvarShortcut.md_working_3.datd1_vatom2">d1_vatom2</b>,<b name="MultiColvarShortcut.md_working_3.datd1_vatom3">d1_vatom3</b>,<b name="MultiColvarShortcut.md_working_3.datd1_vatom4">d1_vatom4</b>,<b name="MultiColvarShortcut.md_working_3.datd1_vatom5">d1_vatom5</b> 
<b name="MultiColvarShortcut.md_working_3.datd1" onclick='showPath("MultiColvarShortcut.md_working_3.dat","MultiColvarShortcut.md_working_3.datd1","MultiColvarShortcut.md_working_3.datd1","blue")'>d1</b><span style="display:none;" id="MultiColvarShortcut.md_working_3.datd1">The DISTANCE action with label <b>d1</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1</td><td width="5%"><font color="blue">vector</font></td><td>the DISTANCE for each set of specified atoms</td></tr></table></span>: <div class="tooltip" style="color:green">DISTANCE<div class="right">Calculate the distance between a pair of atoms. <a href="https://www.plumed.org/doc-master/user-doc/html/_d_i_s_t_a_n_c_e.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS1<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=1,2 <div class="tooltip">ATOMS2<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=3,4 <div class="tooltip">ATOMS3<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=5,6 <div class="tooltip">ATOMS4<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=7,8 <div class="tooltip">ATOMS5<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=9,10 
<b name="MultiColvarShortcut.md_working_3.datd1_lt" onclick='showPath("MultiColvarShortcut.md_working_3.dat","MultiColvarShortcut.md_working_3.datd1_lt","MultiColvarShortcut.md_working_3.datd1_lt","blue")'>d1_lt</b><span style="display:none;" id="MultiColvarShortcut.md_working_3.datd1_lt">The LESS_THAN action with label <b>d1_lt</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1_lt</td><td width="5%"><font color="blue">vector</font></td><td>the vector obtained by doing an element-wise application of a function that is one if the input is less than a threshold to the input vectors</td></tr></table></span>: <div class="tooltip" style="color:green">LESS_THAN<div class="right">Use a switching function to determine how many of the input variables are less than a certain cutoff. <a href="https://www.plumed.org/doc-master/user-doc/html/_l_e_s_s__t_h_a_n.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the values input to this function<i></i></div></div>=<b name="MultiColvarShortcut.md_working_3.datd1">d1</b> <div class="tooltip">SWITCH<div class="right">This keyword is used if you want to employ an alternative to the continuous swiching function defined above<i></i></div></div>={RATIONAL R_0=0.1}
<b name="MultiColvarShortcut.md_working_3.datd1_lessthan" onclick='showPath("MultiColvarShortcut.md_working_3.dat","MultiColvarShortcut.md_working_3.datd1_lessthan","MultiColvarShortcut.md_working_3.datd1_lessthan","black")'>d1_lessthan</b><span style="display:none;" id="MultiColvarShortcut.md_working_3.datd1_lessthan">The SUM action with label <b>d1_lessthan</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1_lessthan</td><td width="5%"><font color="black">scalar</font></td><td>the sum of all the elements in the input vector</td></tr></table></span>: <div class="tooltip" style="color:green">SUM<div class="right">Calculate the sum of the arguments <a href="https://www.plumed.org/doc-master/user-doc/html/_s_u_m.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the values input to this function<i></i></div></div>=<b name="MultiColvarShortcut.md_working_3.datd1_lt">d1_lt</b> <div class="tooltip">PERIODIC<div class="right">if the output of your function is periodic then you should specify the periodicity of the function<i></i></div></div>=NO
<span style="color:blue"># --- End of included input --- </span></span><span style="color:blue" class="comment"># This is not a shortcut</span>
<div class="tooltip" style="color:green">PRINT<div class="right">Print quantities to a file. <a href="https://www.plumed.org/doc-master/user-doc/html/_p_r_i_n_t.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the labels of the values that you would like to print to the file<i></i></div></div>=<b name="MultiColvarShortcut.md_working_3.datd1">d1.lessthan</b> <div class="tooltip">FILE<div class="right">the name of the file on which to output these quantities<i></i></div></div>=colvar
</pre>
 {% endraw %} 
 
As explained above, once the shortcuts have worked their magic PLUMED will actually read in:

{% raw %}
<div style="width: 100%; float:left">
<div style="width: 90%; float:left" id="value_details_MultiColvarShortcut.md_working_4.dat"> Click on the labels of the actions for more information on what each action computes </div>
<div style="width: 10%; float:left"><table><tr><td style="padding:1px"><a href="MultiColvarShortcut.md_working_4.dat.plumed.stderr"><img src="https://img.shields.io/badge/v2.9-failed-red.svg" alt="tested onv2.9" /></a></td></tr><tr><td style="padding:1px"><a href="MultiColvarShortcut.md_working_4.dat.plumed_master.stderr"><img src="https://img.shields.io/badge/master-passing-green.svg" alt="tested onmaster" /></a></td></tr></table></div></div>
<pre style="width=97%;">
<span style="color:blue" class="comment"># This is the expanded shortcut</span>
<b name="MultiColvarShortcut.md_working_4.datd1" onclick='showPath("MultiColvarShortcut.md_working_4.dat","MultiColvarShortcut.md_working_4.datd1","MultiColvarShortcut.md_working_4.datd1","blue")'>d1</b><span style="display:none;" id="MultiColvarShortcut.md_working_4.datd1">The DISTANCE action with label <b>d1</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1</td><td width="5%"><font color="blue">vector</font></td><td>the DISTANCE for each set of specified atoms</td></tr></table></span>: <div class="tooltip" style="color:green">DISTANCE<div class="right">Calculate the distance between a pair of atoms. <a href="https://www.plumed.org/doc-master/user-doc/html/_d_i_s_t_a_n_c_e.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS1<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=1,2 <div class="tooltip">ATOMS2<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=3,4 <div class="tooltip">ATOMS3<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=5,6 <div class="tooltip">ATOMS4<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=7,8 <div class="tooltip">ATOMS5<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=9,10
<b name="MultiColvarShortcut.md_working_4.datd1_lt" onclick='showPath("MultiColvarShortcut.md_working_4.dat","MultiColvarShortcut.md_working_4.datd1_lt","MultiColvarShortcut.md_working_4.datd1_lt","blue")'>d1_lt</b><span style="display:none;" id="MultiColvarShortcut.md_working_4.datd1_lt">The LESS_THAN action with label <b>d1_lt</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1_lt</td><td width="5%"><font color="blue">vector</font></td><td>the vector obtained by doing an element-wise application of a function that is one if the input is less than a threshold to the input vectors</td></tr></table></span>: <div class="tooltip" style="color:green">LESS_THAN<div class="right">Use a switching function to determine how many of the input variables are less than a certain cutoff. <a href="https://www.plumed.org/doc-master/user-doc/html/_l_e_s_s__t_h_a_n.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the values input to this function<i></i></div></div>=<b name="MultiColvarShortcut.md_working_4.datd1">d1</b> <div class="tooltip">SWITCH<div class="right">This keyword is used if you want to employ an alternative to the continuous swiching function defined above<i></i></div></div>={RATIONAL R_0=0.1}
<b name="MultiColvarShortcut.md_working_4.datd1_lessthan" onclick='showPath("MultiColvarShortcut.md_working_4.dat","MultiColvarShortcut.md_working_4.datd1_lessthan","MultiColvarShortcut.md_working_4.datd1_lessthan","black")'>d1_lessthan</b><span style="display:none;" id="MultiColvarShortcut.md_working_4.datd1_lessthan">The SUM action with label <b>d1_lessthan</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1_lessthan</td><td width="5%"><font color="black">scalar</font></td><td>the sum of all the elements in the input vector</td></tr></table></span>: <div class="tooltip" style="color:green">SUM<div class="right">Calculate the sum of the arguments <a href="https://www.plumed.org/doc-master/user-doc/html/_s_u_m.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the values input to this function<i></i></div></div>=<b name="MultiColvarShortcut.md_working_4.datd1_lt">d1_lt</b> <div class="tooltip">PERIODIC<div class="right">if the output of your function is periodic then you should specify the periodicity of the function<i></i></div></div>=NO
<span style="color:blue" class="comment"># This is not part of the expanded shortcut</span>
<div class="tooltip" style="color:green">PRINT<div class="right">Print quantities to a file. <a href="https://www.plumed.org/doc-master/user-doc/html/_p_r_i_n_t.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the labels of the values that you would like to print to the file<i></i></div></div>=<b name="MultiColvarShortcut.md_working_4.datd1">d1.lessthan</b> <div class="tooltip">FILE<div class="right">the name of the file on which to output these quantities<i></i></div></div>=colvar
</pre>
 {% endraw %} 

The wrinkle that you need to notice here is that the quantity that we are asking PLUMED to print out `d1.lessthan` does not appear to be defined in the above input.  
The quantity that we would like to print out is called `d1_lessthan`.  Obviously, given that the input above works, there is a workaround for this problem and it is this
that still remains to be explained.  

The workaround is that you can define output components for shortcuts just as you would define output components in other ActionWithValue objects.  For our Distances action
above we can thus write a registerKeywords method as follows:

```c++
void Distances::registerKeywords(Keywords& keys) {
  ActionShortcut::registerKeywords( keys );
  keys.add("numbered","ATOMS","the pairs of atoms that you would like to calculate the angles for");
  keys.addFlag("NOPBC",false,"ignore the periodic boundary conditions when calculating distances");
  keys.add("optional","LESS_THAN","calculate the number of variables that are less than a certain target value.");
  keys.addOutputComponent("lessthan","LESS_THAN","the number of colvars that have a value less than a threshold");
```

When `ActionWithArguments` tries to interpret a Value name such as `d1.lessthan` it now does two things.

* It checks if there is an ActionWithValue object with the label `d1` that has a component called `d1.lessthan`.
* It checks if there is an ActionShortcut object with the label `d1`.  If there is such an ActionShortcut object, PLUMED checks if `lessthan` is amongst the list of registered componets for that action.  If that has indeed been registered then PLUMED interprets `d1.lessthan` as `d1_lessthan` and searches for an action with the label `d1_lessthan`

Notice that this behaviour is also triggered if you use wildcards like this:

{% raw %}
<div style="width: 100%; float:left">
<div style="width: 90%; float:left" id="value_details_MultiColvarShortcut.md_working_5.dat"> Click on the labels of the actions for more information on what each action computes </div>
<div style="width: 10%; float:left"><table><tr><td style="padding:1px"><a href="MultiColvarShortcut.md_working_5.dat.plumed.stderr"><img src="https://img.shields.io/badge/v2.9-passing-green.svg" alt="tested onv2.9" /></a></td></tr><tr><td style="padding:1px"><a href="MultiColvarShortcut.md_working_5.dat.plumed_master.stderr"><img src="https://img.shields.io/badge/master-passing-green.svg" alt="tested onmaster" /></a></td></tr></table></div></div>
<pre style="width=97%;">
<span id="MultiColvarShortcut.md_working_5.datd1_short"><b name="MultiColvarShortcut.md_working_5.datd1" onclick='showPath("MultiColvarShortcut.md_working_5.dat","MultiColvarShortcut.md_working_5.datd1","MultiColvarShortcut.md_working_5.datd1_shortcut","blue")'>d1</b><span style="display:none;" id="MultiColvarShortcut.md_working_5.datd1_shortcut">The DISTANCES action with label <b>d1</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1</td><td width="5%"><font color="blue">vector</font></td><td>the DISTANCES between the each pair of atoms that were specified</td></tr><tr><td width="5%">d1_lessthan</td><td width="5%"><font color="black">scalar</font></td><td>the number of colvars that have a value less than a threshold</td></tr><tr><td width="5%">d1_lowest</td><td width="5%"><font color="black">scalar</font></td><td>the smallest of the colvars</td></tr></table></span>: <div class="tooltip" style="color:green">DISTANCES<div class="right">Calculate the distances between multiple piars of atoms This action is <a class="toggler" href='javascript:;' onclick='toggleDisplay("MultiColvarShortcut.md_working_5.datd1");'>a shortcut</a>. <a href="https://www.plumed.org/doc-master/user-doc/html/_d_i_s_t_a_n_c_e_s.html">More details</a><i></i></div></div> <div class="tooltip">ATOMS1<div class="right">the pairs of atoms that you would like to calculate the angles for<i></i></div></div>=1,2 <div class="tooltip">ATOMS2<div class="right">the pairs of atoms that you would like to calculate the angles for<i></i></div></div>=3,4 <div class="tooltip">ATOMS3<div class="right">the pairs of atoms that you would like to calculate the angles for<i></i></div></div>=5,6 <div class="tooltip">ATOMS4<div class="right">the pairs of atoms that you would like to calculate the angles for<i></i></div></div>=7,8 <div class="tooltip">ATOMS5<div class="right">the pairs of atoms that you would like to calculate the angles for<i></i></div></div>=9,10 <div class="tooltip">LOWEST<div class="right"> this flag allows you to recover the lowest of these variables<i></i></div></div> <div class="tooltip">LESS_THAN<div class="right">calculate the number of variables that are less than a certain target value<i></i></div></div>={RATIONAL R_0=0.1}
</span><span id="MultiColvarShortcut.md_working_5.datd1_long" style="display:none;"><span style="color:blue" class="comment"># PLUMED interprets the command:
</span><span class="toggler" style="color:red" onclick='toggleDisplay("MultiColvarShortcut.md_working_5.datd1")'># d1: DISTANCES ATOMS1=1,2 ATOMS2=3,4 ATOMS3=5,6 ATOMS4=7,8 ATOMS5=9,10 LOWEST LESS_THAN={RATIONAL R_0=0.1}</span>
<span style="color:blue" class="comment"># as follows (Click the red comment above to revert to the short version of the input):</span>
<b name="MultiColvarShortcut.md_working_5.datd1_vatom1" onclick='showPath("MultiColvarShortcut.md_working_5.dat","MultiColvarShortcut.md_working_5.datd1_vatom1","MultiColvarShortcut.md_working_5.datd1_vatom1","violet")'>d1_vatom1</b><span style="display:none;" id="MultiColvarShortcut.md_working_5.datd1_vatom1">The CENTER_FAST action with label <b>d1_vatom1</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1_vatom1</td><td width="5%"><font color="violet">atoms</font></td><td>virtual atom calculated by CENTER_FAST action</td></tr></table></span>: <div class="tooltip" style="color:green">CENTER<div class="right">Calculate the center for a group of atoms, with arbitrary weights. <a href="https://www.plumed.org/doc-master/user-doc/html/_c_e_n_t_e_r.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the group of atoms that you are calculating the Gyration Tensor for<i></i></div></div>=1,2 
<b name="MultiColvarShortcut.md_working_5.datd1_vatom2" onclick='showPath("MultiColvarShortcut.md_working_5.dat","MultiColvarShortcut.md_working_5.datd1_vatom2","MultiColvarShortcut.md_working_5.datd1_vatom2","violet")'>d1_vatom2</b><span style="display:none;" id="MultiColvarShortcut.md_working_5.datd1_vatom2">The CENTER_FAST action with label <b>d1_vatom2</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1_vatom2</td><td width="5%"><font color="violet">atoms</font></td><td>virtual atom calculated by CENTER_FAST action</td></tr></table></span>: <div class="tooltip" style="color:green">CENTER<div class="right">Calculate the center for a group of atoms, with arbitrary weights. <a href="https://www.plumed.org/doc-master/user-doc/html/_c_e_n_t_e_r.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the group of atoms that you are calculating the Gyration Tensor for<i></i></div></div>=3,4 
<b name="MultiColvarShortcut.md_working_5.datd1_vatom3" onclick='showPath("MultiColvarShortcut.md_working_5.dat","MultiColvarShortcut.md_working_5.datd1_vatom3","MultiColvarShortcut.md_working_5.datd1_vatom3","violet")'>d1_vatom3</b><span style="display:none;" id="MultiColvarShortcut.md_working_5.datd1_vatom3">The CENTER_FAST action with label <b>d1_vatom3</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1_vatom3</td><td width="5%"><font color="violet">atoms</font></td><td>virtual atom calculated by CENTER_FAST action</td></tr></table></span>: <div class="tooltip" style="color:green">CENTER<div class="right">Calculate the center for a group of atoms, with arbitrary weights. <a href="https://www.plumed.org/doc-master/user-doc/html/_c_e_n_t_e_r.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the group of atoms that you are calculating the Gyration Tensor for<i></i></div></div>=5,6 
<b name="MultiColvarShortcut.md_working_5.datd1_vatom4" onclick='showPath("MultiColvarShortcut.md_working_5.dat","MultiColvarShortcut.md_working_5.datd1_vatom4","MultiColvarShortcut.md_working_5.datd1_vatom4","violet")'>d1_vatom4</b><span style="display:none;" id="MultiColvarShortcut.md_working_5.datd1_vatom4">The CENTER_FAST action with label <b>d1_vatom4</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1_vatom4</td><td width="5%"><font color="violet">atoms</font></td><td>virtual atom calculated by CENTER_FAST action</td></tr></table></span>: <div class="tooltip" style="color:green">CENTER<div class="right">Calculate the center for a group of atoms, with arbitrary weights. <a href="https://www.plumed.org/doc-master/user-doc/html/_c_e_n_t_e_r.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the group of atoms that you are calculating the Gyration Tensor for<i></i></div></div>=7,8 
<b name="MultiColvarShortcut.md_working_5.datd1_vatom5" onclick='showPath("MultiColvarShortcut.md_working_5.dat","MultiColvarShortcut.md_working_5.datd1_vatom5","MultiColvarShortcut.md_working_5.datd1_vatom5","violet")'>d1_vatom5</b><span style="display:none;" id="MultiColvarShortcut.md_working_5.datd1_vatom5">The CENTER_FAST action with label <b>d1_vatom5</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1_vatom5</td><td width="5%"><font color="violet">atoms</font></td><td>virtual atom calculated by CENTER_FAST action</td></tr></table></span>: <div class="tooltip" style="color:green">CENTER<div class="right">Calculate the center for a group of atoms, with arbitrary weights. <a href="https://www.plumed.org/doc-master/user-doc/html/_c_e_n_t_e_r.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the group of atoms that you are calculating the Gyration Tensor for<i></i></div></div>=9,10 
<b name="MultiColvarShortcut.md_working_5.datd1_grp" onclick='showPath("MultiColvarShortcut.md_working_5.dat","MultiColvarShortcut.md_working_5.datd1_grp","MultiColvarShortcut.md_working_5.datd1_grp","violet")'>d1_grp</b><span style="display:none;" id="MultiColvarShortcut.md_working_5.datd1_grp">The GROUP action with label <b>d1_grp</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1_grp</td><td width="5%"><font color="violet">atoms</font></td><td>indices of atoms specified in GROUP</td></tr></table></span>: <div class="tooltip" style="color:green">GROUP<div class="right">Define a group of atoms so that a particular list of atoms can be referenced with a single label in definitions of CVs or virtual atoms. <a href="https://www.plumed.org/doc-master/user-doc/html/_g_r_o_u_p.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS<div class="right">the numerical indexes for the set of atoms in the group<i></i></div></div>=<b name="MultiColvarShortcut.md_working_5.datd1_vatom1">d1_vatom1</b>,<b name="MultiColvarShortcut.md_working_5.datd1_vatom2">d1_vatom2</b>,<b name="MultiColvarShortcut.md_working_5.datd1_vatom3">d1_vatom3</b>,<b name="MultiColvarShortcut.md_working_5.datd1_vatom4">d1_vatom4</b>,<b name="MultiColvarShortcut.md_working_5.datd1_vatom5">d1_vatom5</b> 
<b name="MultiColvarShortcut.md_working_5.datd1" onclick='showPath("MultiColvarShortcut.md_working_5.dat","MultiColvarShortcut.md_working_5.datd1","MultiColvarShortcut.md_working_5.datd1","blue")'>d1</b><span style="display:none;" id="MultiColvarShortcut.md_working_5.datd1">The DISTANCE action with label <b>d1</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1</td><td width="5%"><font color="blue">vector</font></td><td>the DISTANCE for each set of specified atoms</td></tr></table></span>: <div class="tooltip" style="color:green">DISTANCE<div class="right">Calculate the distance between a pair of atoms. <a href="https://www.plumed.org/doc-master/user-doc/html/_d_i_s_t_a_n_c_e.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ATOMS1<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=1,2 <div class="tooltip">ATOMS2<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=3,4 <div class="tooltip">ATOMS3<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=5,6 <div class="tooltip">ATOMS4<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=7,8 <div class="tooltip">ATOMS5<div class="right">the pair of atom that we are calculating the distance between<i></i></div></div>=9,10 
<b name="MultiColvarShortcut.md_working_5.datd1_lt" onclick='showPath("MultiColvarShortcut.md_working_5.dat","MultiColvarShortcut.md_working_5.datd1_lt","MultiColvarShortcut.md_working_5.datd1_lt","blue")'>d1_lt</b><span style="display:none;" id="MultiColvarShortcut.md_working_5.datd1_lt">The LESS_THAN action with label <b>d1_lt</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1_lt</td><td width="5%"><font color="blue">vector</font></td><td>the vector obtained by doing an element-wise application of a function that is one if the input is less than a threshold to the input vectors</td></tr></table></span>: <div class="tooltip" style="color:green">LESS_THAN<div class="right">Use a switching function to determine how many of the input variables are less than a certain cutoff. <a href="https://www.plumed.org/doc-master/user-doc/html/_l_e_s_s__t_h_a_n.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the values input to this function<i></i></div></div>=<b name="MultiColvarShortcut.md_working_5.datd1">d1</b> <div class="tooltip">SWITCH<div class="right">This keyword is used if you want to employ an alternative to the continuous swiching function defined above<i></i></div></div>={RATIONAL R_0=0.1}
<b name="MultiColvarShortcut.md_working_5.datd1_lessthan" onclick='showPath("MultiColvarShortcut.md_working_5.dat","MultiColvarShortcut.md_working_5.datd1_lessthan","MultiColvarShortcut.md_working_5.datd1_lessthan","black")'>d1_lessthan</b><span style="display:none;" id="MultiColvarShortcut.md_working_5.datd1_lessthan">The SUM action with label <b>d1_lessthan</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1_lessthan</td><td width="5%"><font color="black">scalar</font></td><td>the sum of all the elements in the input vector</td></tr></table></span>: <div class="tooltip" style="color:green">SUM<div class="right">Calculate the sum of the arguments <a href="https://www.plumed.org/doc-master/user-doc/html/_s_u_m.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the values input to this function<i></i></div></div>=<b name="MultiColvarShortcut.md_working_5.datd1_lt">d1_lt</b> <div class="tooltip">PERIODIC<div class="right">if the output of your function is periodic then you should specify the periodicity of the function<i></i></div></div>=NO
<b name="MultiColvarShortcut.md_working_5.datd1_lowest" onclick='showPath("MultiColvarShortcut.md_working_5.dat","MultiColvarShortcut.md_working_5.datd1_lowest","MultiColvarShortcut.md_working_5.datd1_lowest","black")'>d1_lowest</b><span style="display:none;" id="MultiColvarShortcut.md_working_5.datd1_lowest">The LOWEST action with label <b>d1_lowest</b> calculates the following quantities:<table  align="center" frame="void" width="95%" cellpadding="5%"><tr><td width="5%"><b> Quantity </b>  </td><td width="5%"><b> Type </b>  </td><td><b> Description </b> </td></tr><tr><td width="5%">d1_lowest</td><td width="5%"><font color="black">scalar</font></td><td>the smallest element in the input vector if one vector specified.  If multiple vectors of the same size specified the largest elements of these vector computed elementwise.</td></tr></table></span>: <div class="tooltip" style="color:green">LOWEST<div class="right">This function can be used to find the lowest colvar by magnitude in a set. <a href="https://www.plumed.org/doc-master/user-doc/html/_l_o_w_e_s_t.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the values input to this function<i></i></div></div>=<b name="MultiColvarShortcut.md_working_5.datd1">d1</b>
<span style="color:blue"># --- End of included input --- </span></span><div class="tooltip" style="color:green">PRINT<div class="right">Print quantities to a file. <a href="https://www.plumed.org/doc-master/user-doc/html/_p_r_i_n_t.html" style="color:green">More details</a><i></i></div></div> <div class="tooltip">ARG<div class="right">the labels of the values that you would like to print to the file<i></i></div></div>=<b name="MultiColvarShortcut.md_working_5.datd1">d1</b> <div class="tooltip">FILE<div class="right">the name of the file on which to output these quantities<i></i></div></div>=colvar
</pre>
 {% endraw %} 

PRINT here would ouptut `d1_lessthan` and `d1_lowest` as these are the two actions that are registerd and created by the DISTANCES shortcut command.

## Conclusion

The new syntax for MultiColvar is (I think) clearer than the old one.  It also more flexible and allows one to do many more things with PLUMED.  I thus want to encourage 
users to learn it and to discard the old-style inputs in future.  To help with this aim, I have ensured that you have the option to see the full input whenever a shortcut
action appears in an example input on the tutorials page and in the nest.  You can try this functionality above.  If you hover over any of the DISTANCES commands in the example 
inputs above you will see an option to expand the shortcut.  If you click this option the full three-line input for `DISTANCES LESS_THAN` is shown.

I think that allowing users to see how code has been implemented in this way is enormously useful. Users can start understanding how the code works by interacting with the rich
set of (automatically-annotated) examples in the nest and tutorials that are likely related to the calculations they wish to perform.  They thus no longer need to battle through 
material in a manual that is full of information that is not relevant to the work they are doing. 

